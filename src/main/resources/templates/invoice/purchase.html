<div class="row">

    <div class="col-md-12">
        <div class="d-flex align-items-center gap-2">
            <strong>Trạng thái hiện tại:</strong>
            <span class="badge bg-primary px-3 py-2" th:id="'status' + ${tabId}">
            Đang tạo hóa đơn nhập
        </span>
        </div>
        <p class="mt-2 d-none" th:id="'message' + ${tabId}"></p>
    </div>

    <div class="col-md-9 mt-3">
        <h4 class="text-center"
        >Danh sách sản phẩm</h4>
        <div class="col-12 position-relative">
            <div class="form-floating">
                <input autocomplete="off" class="form-control" placeholder="Nhập tên sản phẩm"
                       th:id="'productSearch' + ${tabId}" type="text">
                <label th:for="'productSearch' + ${tabId}">Nhập tên sản phẩm</label>
            </div>
            <div class="list-group d-none position-absolute w-100 z-3 bg-body" th:id="'productSuggestion' + ${tabId}">

            </div>
        </div>

        <table class="table mt-2 table-sm table-bordered mt-3">
            <thead>
            <tr>
                <th>Tên sản phẩm</th>
                <th>Hình ảnh</th>
                <th>Quy cách đóng gói</th>
                <th>Số lượng</th>
                <th>Khối lượng</th>
                <th>Giá bán</th>
                <th>Giá nhập</th>
                <th>Thành tiền</th>
                <th>Thao tác</th>
            </tr>
            </thead>
            <tbody th:id="'productList' + ${tabId}">
            </tbody>
        </table>

        <hr>

        <div class="row g-2 align-items-center">
            <div class="col-12">
                <h5 class="text-left">Tổng tiền: <span th:id="'totalPrice' + ${tabId}" data-raw="0">0</span></h5>
            </div>

            <div class="col-12">
                <div class="form-floating">
                    <textarea class="form-control" rows="2" th:id="'note' + ${tabId}"></textarea>
                    <label th:for="'note' + ${tabId}">Ghi chú</label>
                </div>
            </div>

            <div class="col-12 d-none" th:id="'printInvoice' + ${tabId}">
                <a class="btn btn-primary w-100" th:id="'printInvoiceBtn' + ${tabId}">
                    <i class="bi bi-printer"></i> In hóa đơn
                </a>
            </div>

        </div>


    </div>

    <!-- Cột phải: Khách hàng -->
    <div class="col-md-3 mt-3">
        <h4 class="text-center">Thông tin khách hàng</h4>
        <div class="form-floating mb-3">
            <input autocomplete="off" class="form-control" placeholder="Số điện thoại khách hàng"
                   th:id="'customerPhone' + ${tabId}" type="text">
            <label th:for="'customerPhone' + ${tabId}">Số điện thoại khách hàng</label>
        </div>

        <div class="form-floating mb-3">
            <input autocomplete="off" class="form-control" placeholder="Tên khách hàng" th:id="'customerName' + ${tabId}"
                   type="text">
            <label th:for="'customerName' + ${tabId}">
                Tên khách hàng
            </label>
        </div>

        <div class="form-floating mb-3">
            <input autocomplete="off" class="form-control" placeholder="Địa chỉ khách hàng"
                   th:id="'customerAddress' + ${tabId}" type="text">
            <label th:for="'customerAddress' + ${tabId}">
                Địa chỉ khách hàng
            </label>
        </div>

        <div class="form-floating mb-2">
            <p class="text-muted">Số dư khách hàng
                <span th:id="'customerBalance' + ${tabId}">0</span>
            </p>
        </div>
        <button class="btn btn-primary mt-3 d-none" th:id="'btnCustomer' + ${tabId}" type="button">
            <i class="bi bi-person-plus-fill"></i> Thêm khách hàng
        </button>

        <hr>

        <div class="row">
            <div class="d-flex flex-wrap" role="group" aria-label="Chọn phương thức thanh toán">
                <input type="radio" class="btn-check mb-1" name="paymentMethod" th:id="'unpaid' + ${tabId}" checked>
                <label class="btn btn-outline-primary p-1 mb-1 w-100" th:for="'unpaid' + ${tabId}">Nợ</label>

                <input type="radio" class="btn-check mb-1" name="paymentMethod" th:id="'paid' + ${tabId}">
                <label class="btn btn-outline-success p-1 mb-1 w-100" th:for="'paid' + ${tabId}">Tiền hàng</label>

                <input type="radio" class="btn-check mb-1" name="paymentMethod" th:id="'paidAndDebt' + ${tabId}">
                <label class="btn btn-outline-warning p-1 mb-1 w-100" th:for="'paidAndDebt' + ${tabId}">Tiền hàng + tiền nợ</label>
            </div>

            <div class="col-auto mb-2">
                <div class="form-floating">
                    <input class="form-control" th:id="'payment' + ${tabId}" type="text">
                    <label th:for="'payment' + ${tabId}">Đã thanh toán</label>
                </div>
            </div>
            <div class="col-auto mb-2">
                <p class="text-muted">Còn nợ khách hàng
                    <span th:id="'debt' + ${tabId}">0</span>
                </p>
            </div>
            <div class="col-auto d-flex align-items-center">
                <div class="form-check">
                    <input class="form-check-input" th:id="'loadingService' + ${tabId}" type="checkbox">
                    <label class="form-check-label ms-2" th:for="'loadingService' + ${tabId}">Thuê bốc vác</label>
                </div>
            </div>

            <div class="col-auto">
                <button class="btn btn-primary w-100 px-3 py-2" th:id="'btnPurchase' + ${tabId}" type="button">
                    <i class="bi bi-cart-plus"></i> Nhập hàng
                </button>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            initPurchaseEvents("[[${tabId}]]");
        });
    </script>
</div>